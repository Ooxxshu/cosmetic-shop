{% extends "base.html" %}
{% block content %}

<!-- Hero 橫幅 -->
<div class="hero mb-4">
  <h1 class="h3 mb-2">精選保養 · 新品上架</h1>
  <p class="mb-0">面膜、護手霜等人氣單品，現在加入購物車即可結帳測試。</p>
</div>

<!-- 篩選分類 -->
<div class="filter mb-3">
  <div class="btn-group" role="group" aria-label="category filter">
    <a class="btn btn-outline-secondary {{ 'active' if not current_cat else '' }}"
       href="{{ url_for('products') }}">全部</a>
    {% for c in categories %}
      <a class="btn btn-outline-secondary {{ 'active' if current_cat==c else '' }}"
         href="{{ url_for('products', cat=c) }}">{{ c }}</a>
    {% endfor %}
  </div>
</div>

<!-- 商品列表 -->
<div class="row g-4">
  {% for p in items %}
  <div class="col-12 col-sm-6 col-lg-4">
    <div class="card product-card h-100">
      <img class="product-thumb" src="{{ p.img }}" alt="{{ p.name }}">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title mb-1">{{ p.name }}</h5>
        <div class="text-muted small mb-2">{{ p.category }}</div>
        <div class="price h5 mb-3">NT$ {{ '%.0f'|format(p.price) }}</div>

        <form action="{{ url_for('add_to_cart') }}" method="post" class="mt-auto d-flex gap-2">
          <input type="hidden" name="pid" value="{{ p.id }}">
          <input type="number" name="qty" value="1" min="1" class="form-control w-25">
          <button class="btn btn-dark flex-fill" type="submit">加入購物車</button>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
